CREATE TABLE public.lists (id UUID PRIMARY KEY DEFAULT gen_random_uuid(), user_id UUID NOT NULL REFERENCES public.users(id) ON DELETE CASCADE, name TEXT NOT NULL, description TEXT, is_default BOOLEAN DEFAULT FALSE, created_at TIMESTAMPTZ DEFAULT NOW(), updated_at TIMESTAMPTZ DEFAULT NOW()); ALTER TABLE public.lists ENABLE ROW LEVEL SECURITY; CREATE POLICY "Users can manage own lists" ON public.lists FOR ALL USING (auth.uid() = user_id); CREATE INDEX idx_lists_user_id ON public.lists(user_id); CREATE INDEX idx_lists_is_default ON public.lists(user_id, is_default) WHERE is_default = TRUE;